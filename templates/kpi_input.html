{% extends "base.html" %}
{% block content %}
    <!-- Page title-->
    <h4 class="center-align">KPI INPUTS </h4> <br>

    <!-- Title and dashboard link-->
    <div class="row">
        <div class="col s6">
            <h5 class="align-left red-text text-darken-4"> <i class="fas fa-chart-line"></i><i class="fas fa-caret-right"></i> KPI Inputs</h5>
        </div>
        <!--button cancel-->
        <div class="col s3 right">
            <h5> <a class="waves-effect waves-teal btn-flat" href="{{url_for('add_kpiinput')}}"> ADD INPUT </a></h5>
        </div>
    </div>
    <hr><br>
    <!--New KPI Input-->
    
    <div class="row card-panel grey lighten-5 s12">
        <h6 class="align-left red-text text-darken-4">Filter Inputs:</h6>
    </div>
    <!--KPI Inputs-->
    <div class="row card-panel grey lighten-5 s12">
        <h6 class="align-left red-text text-darken-4">Filter Inputs:</h6>
        <!--from for filter button-->
        <form action="{{url_for('filter')}}" method="POST" class="s12">
            <!--Filters Section-->
            <div class="row">
                <!--Filter dropdown-->
                <div class="col s6">
                    <select id="input_kpiname" name="input_kpiname" class="materialize-textarea validate" required>
                        <option value="" disabled selected>{{ kpiselection }}</option>
                        {%for kp in kpi%}
                            <option value="{{kp.kpi_name}}">{{kp.kpi_name}}</option>
                        {% endfor %}
                        <label for="input_kpiname"></label>
                    </select>
                </div>
                <div class="col s2 center-align">
                    <button type="submit" class="waves-effect blue-grey btn">
                        <i class="fas fa-sort-amount-down"></i>
                    </button>
                </div>
                <!--Reset button-->
                <div class="col s left">
                    <a href="{{url_for('kpi_input')}}" class="red btn text-shadow"><i class="fas fa-refresh"></i></a>
                </div>
            </div>
        </form>
        <h6 class="align-left red-text text-darken-4">Edit Inputs:</h6>
        <!--KPI table-->
        <table class="highlight responsive-table centered">  
            <thead>
                <tr class="grey lighten-2">
                    <th>KPI</th>
                    <th>Owner</th>
                    <th>Date</th>
                    <th>Week</th>
                    <th>UoM</th>
                    <th>BSL</th>
                    <th>TGT</th>
                    <th>ACT</th>
                    <th>STATUS</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <!-- KPIS Summary - table body-->
            <tbody>
                {%for input in kpiintputs %}
                    <tr>
                        <td>{{ input.input_kpiname }}</td>
                        <td>{{ input.input_kpiowner }}</td>
                        <td>{{ input.input_logdate }}</td>
                        <td>{{ input.input_weeknumber }}</td>
                        <td>{{ input.input_uom }}</td>
                        <td>{{ input.input_bsl }}</td>
                        <td>{{ input.input_tgt }}</td>
                        <td>{{ input.input_act }}</td>
                        <!--check status and assign color icons -->
                        {%if input.input_status=="red" %}
                            <td>
                                <i class="fas fa-times-circle red-text"></i>
                            </td>
                            {%elif input.input_status=="green"%}
                                <td>
                                    <i class="fas fa-check-circle green-text"></i>
                                </td>
                            {% else %}
                                <td>
                                    <i class="far fa-circle grey-text"></i>
                                </td>               
                        {%endif%}
                        <td><a href="{{ url_for('edit_kpiinput',  kpiinput_id = input._id)}}" class="btn blue-grey">EDIT</a>
                        </td>
                    </tr>
                {%endfor%}
            </tbody> 
        </table>      
    </div>

{% endblock %}
